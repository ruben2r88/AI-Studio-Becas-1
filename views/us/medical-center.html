<section id="medical-center" class="eture-section py-4">
  <div class="container">
    <header class="mb-4">
      <h1 class="mb-1 eture-heading">Medical Center</h1>
      <p class="mb-1 text-uppercase small fw-semibold text-muted">HEALTH &amp; CARE</p>
      <p class="text-muted mb-0">Stay on top of your health status, insurance details, and medical documents.</p>
    </header>

    <ul class="nav nav-tabs" id="medicalCenterTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button
          class="nav-link active"
          id="mc-status-tab"
          data-bs-toggle="tab"
          data-bs-target="#mc-status"
          type="button"
          role="tab"
          aria-controls="mc-status"
          aria-selected="true"
        >
          Status
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button
          class="nav-link"
          id="mc-insurance-tab"
          data-bs-toggle="tab"
          data-bs-target="#mc-insurance"
          type="button"
          role="tab"
          aria-controls="mc-insurance"
          aria-selected="false"
        >
          Insurance
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button
          class="nav-link"
          id="mc-history-tab"
          data-bs-toggle="tab"
          data-bs-target="#mc-history"
          type="button"
          role="tab"
          aria-controls="mc-history"
          aria-selected="false"
        >
          History
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button
          class="nav-link"
          id="mc-tests-tab"
          data-bs-toggle="tab"
          data-bs-target="#mc-tests"
          type="button"
          role="tab"
          aria-controls="mc-tests"
          aria-selected="false"
        >
          Tests &amp; Reports
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button
          class="nav-link"
          id="mc-appointments-tab"
          data-bs-toggle="tab"
          data-bs-target="#mc-appointments"
          type="button"
          role="tab"
          aria-controls="mc-appointments"
          aria-selected="false"
        >
          Appointments
        </button>
      </li>
    </ul>

    <div class="tab-content pt-3" id="medicalCenterTabsContent">
      <div class="tab-pane fade show active" id="mc-status" role="tabpanel" aria-labelledby="mc-status-tab">
        <section class="card eture-card" aria-labelledby="medical-status-heading">
          <div class="card-body">
            <div class="d-flex flex-column gap-3">
              <div>
                <h2 id="medical-status-heading" class="h5 mb-1">Medical Status</h2>
                <p class="text-muted mb-0">Share your daily health status to keep staff informed.</p>
              </div>

              <div class="row g-3">
                <div class="col-12">
                  <label class="form-label fw-semibold">Status</label>
                  <div class="d-flex flex-wrap gap-3">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="medicalStatus"
                        id="statusHealthy"
                        value="Healthy"
                        checked
                      />
                      <label class="form-check-label" for="statusHealthy">Healthy</label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="medicalStatus"
                        id="statusInjured"
                        value="Injured"
                      />
                      <label class="form-check-label" for="statusInjured">Injured</label>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <label for="fatigueLevel" class="form-label fw-semibold">Fatigue level</label>
                  <select class="form-select" id="fatigueLevel">
                    <option value="Low">Low</option>
                    <option value="Medium">Medium</option>
                    <option value="High">High</option>
                  </select>
                  <div class="mt-2">
                    <div class="progress" style="height: 8px;">
                      <div
                        class="progress-bar bg-success"
                        role="progressbar"
                        style="width: 33.333%;"
                        data-fatigue-segment
                        aria-label="Fatigue segment 1"
                      ></div>
                      <div
                        class="progress-bar bg-light"
                        role="progressbar"
                        style="width: 33.333%;"
                        data-fatigue-segment
                        aria-label="Fatigue segment 2"
                      ></div>
                      <div
                        class="progress-bar bg-light"
                        role="progressbar"
                        style="width: 33.333%;"
                        data-fatigue-segment
                        aria-label="Fatigue segment 3"
                      ></div>
                    </div>
                    <small class="text-muted">Low: 1 bar, Medium: 2 bars, High: 3 bars.</small>
                  </div>
                </div>

                <div class="col-12 d-none" id="injuryBlock">
                  <div class="border rounded p-3 bg-light">
                    <div class="d-flex flex-column gap-3">
                      <div>
                        <h3 class="h6 mb-1">Injury details</h3>
                        <p class="text-muted small mb-0">Help staff understand the issue so they can support you faster.</p>
                      </div>
                      <div>
                        <label for="injuryType" class="form-label fw-semibold">Injury type</label>
                        <select class="form-select" id="injuryType">
                          <option value="Hamstring">Hamstring</option>
                          <option value="Ankle">Ankle</option>
                          <option value="Knee">Knee</option>
                          <option value="Muscle injury">Muscle injury</option>
                          <option value="Fatigue">Fatigue</option>
                          <option value="Other">Other</option>
                        </select>
                      </div>
                      <div id="injuryOtherGroup" class="d-none">
                        <label for="injuryOther" class="form-label fw-semibold">Describe injury</label>
                        <input
                          type="text"
                          class="form-control"
                          id="injuryOther"
                          placeholder="Describe the injury"
                        />
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <label for="medicalNotes" class="form-label fw-semibold">How are you feeling today?</label>
                  <textarea
                    class="form-control"
                    id="medicalNotes"
                    rows="3"
                    placeholder="Share any pain, soreness, or concerns."
                  ></textarea>
                  <div class="form-text">These notes are shared with the medical team.</div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <div class="tab-pane fade" id="mc-insurance" role="tabpanel" aria-labelledby="mc-insurance-tab">
        <section class="card eture-card" aria-labelledby="insurance-heading">
          <div class="card-body">
            <div class="d-flex flex-column gap-3">
              <div>
                <h2 id="insurance-heading" class="h5 mb-1">Insurance Information</h2>
                <p class="text-muted mb-0">Keep your insurance details updated for quick access when needed.</p>
              </div>

              <div class="row g-3">
                <div class="col-12">
                  <label for="insuranceProvider" class="form-label fw-semibold">Insurance Provider</label>
                  <select class="form-select" id="insuranceProvider">
                    <option value="DKV">DKV</option>
                    <option value="Other">Other</option>
                  </select>
                </div>

                <div class="col-12 d-none" id="providerOtherGroup">
                  <label for="providerOther" class="form-label fw-semibold">Provider name</label>
                  <input type="text" class="form-control" id="providerOther" placeholder="Enter provider" />
                </div>

                <div class="col-12">
                  <label for="policyNumber" class="form-label fw-semibold">Policy Number</label>
                  <input type="text" class="form-control" id="policyNumber" placeholder="Policy number" />
                </div>

                <div class="col-12">
                  <label class="form-label fw-semibold">Insurance Card</label>
                  <div class="card border border-2 border-secondary border-opacity-25">
                    <div class="card-body text-center">
                      <p class="mb-2 text-muted">No file uploaded</p>
                      <button type="button" class="btn btn-outline-secondary btn-sm" disabled>
                        Upload (player)
                      </button>
                      <div class="form-text mt-2">
                        In the real system, staff may upload or validate your insurance card.
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="alert alert-info mb-0" role="alert">
                    This is the information you must show at the hospital if you go on your own
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <div class="tab-pane fade" id="mc-history" role="tabpanel" aria-labelledby="mc-history-tab">
        <section class="card eture-card" aria-labelledby="history-heading">
          <div class="card-body">
            <div class="d-flex flex-column gap-3">
              <div>
                <h2 id="history-heading" class="h5 mb-1">Medical History</h2>
                <p class="text-muted mb-0">
                  Complete the questionnaire once and staff can consult it whenever needed.
                </p>
              </div>

              <div class="card border-0 bg-light">
                <div class="card-body">
                  <h3 class="h6 mb-2">Medical Questionnaire (Summary)</h3>
                  <ul class="mb-3">
                    <li>Allergies: None reported</li>
                    <li>Conditions: Asthma (mild)</li>
                    <li>Medications: Inhaler as needed</li>
                  </ul>
                  <button type="button" class="btn btn-outline-primary btn-sm" disabled>
                    Open full questionnaire (PDF)
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <div class="tab-pane fade" id="mc-tests" role="tabpanel" aria-labelledby="mc-tests-tab">
        <section class="card eture-card" aria-labelledby="tests-heading">
          <div class="card-body">
            <div class="d-flex flex-column gap-3">
              <div>
                <h2 id="tests-heading" class="h5 mb-1">Medical Tests &amp; Reports</h2>
                <p class="text-muted mb-1">These documents are uploaded by ETURE staff after medical visits or tests.</p>
                <small class="text-muted">Player view only. Uploads are handled by staff.</small>
              </div>

              <div class="table-responsive">
                <table class="table table-sm align-middle mb-0">
                  <thead class="table-light">
                    <tr>
                      <th scope="col">Name</th>
                      <th scope="col">Date</th>
                      <th scope="col">Uploaded by</th>
                      <th scope="col">Status</th>
                      <th scope="col" class="text-end">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Pre-season physical report</td>
                      <td>Jan 10, 2026</td>
                      <td>Medical Staff</td>
                      <td><span class="badge bg-success">Ready</span></td>
                      <td class="text-end">
                        <button type="button" class="btn btn-outline-primary btn-sm" disabled>View</button>
                      </td>
                    </tr>
                    <tr>
                      <td>Blood test panel</td>
                      <td>Dec 12, 2025</td>
                      <td>Medical Staff</td>
                      <td><span class="badge bg-success">Ready</span></td>
                      <td class="text-end">
                        <button type="button" class="btn btn-outline-primary btn-sm" disabled>View</button>
                      </td>
                    </tr>
                    <tr>
                      <td>Ultrasound report</td>
                      <td>Nov 02, 2025</td>
                      <td>Medical Staff</td>
                      <td><span class="badge bg-success">Ready</span></td>
                      <td class="text-end">
                        <button type="button" class="btn btn-outline-primary btn-sm" disabled>View</button>
                      </td>
                    </tr>
                    <tr>
                      <td>Physiotherapy summary</td>
                      <td>Oct 18, 2025</td>
                      <td>Medical Staff</td>
                      <td><span class="badge bg-success">Ready</span></td>
                      <td class="text-end">
                        <button type="button" class="btn btn-outline-primary btn-sm" disabled>View</button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </section>
      </div>

      <div class="tab-pane fade" id="mc-appointments" role="tabpanel" aria-labelledby="mc-appointments-tab">
        <section class="card eture-card" aria-labelledby="appointments-heading">
          <div class="card-body">
            <div class="d-flex flex-column gap-3">
              <div>
                <h2 id="appointments-heading" class="h5 mb-1">Appointments</h2>
                <p class="text-muted mb-0">Medical appointments will be scheduled by ETURE staff.</p>
              </div>

              <ul class="list-group">
                <li class="list-group-item d-flex justify-content-between align-items-start">
                  <div>
                    <div class="fw-semibold">Physio check-in</div>
                    <div class="text-muted small">Jan 31, 2026 路 9:30 AM 路 ETURE Clinic</div>
                  </div>
                  <span class="badge bg-primary">Upcoming</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-start">
                  <div>
                    <div class="fw-semibold">Routine health screening</div>
                    <div class="text-muted small">Jan 14, 2026 路 2:00 PM 路 Hospital visit</div>
                  </div>
                  <span class="badge bg-light text-dark">Completed</span>
                </li>
              </ul>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>
</section>

<script type="module">
  const statusHealthy = document.getElementById('statusHealthy');
  const statusInjured = document.getElementById('statusInjured');
  const injuryBlock = document.getElementById('injuryBlock');
  const injuryType = document.getElementById('injuryType');
  const injuryOtherGroup = document.getElementById('injuryOtherGroup');
  const insuranceProvider = document.getElementById('insuranceProvider');
  const providerOtherGroup = document.getElementById('providerOtherGroup');
  const fatigueLevel = document.getElementById('fatigueLevel');
  const fatigueSegments = Array.from(document.querySelectorAll('[data-fatigue-segment]'));

  const updateInjuryBlock = () => {
    injuryBlock.classList.toggle('d-none', !statusInjured.checked);
  };

  const updateInjuryOther = () => {
    injuryOtherGroup.classList.toggle('d-none', injuryType.value !== 'Other');
  };

  const updateProviderOther = () => {
    providerOtherGroup.classList.toggle('d-none', insuranceProvider.value !== 'Other');
  };

  const updateFatigue = () => {
    const value = fatigueLevel.value;
    const filled = value === 'Low' ? 1 : value === 'Medium' ? 2 : value === 'High' ? 3 : 0;

    fatigueSegments.forEach((segment, index) => {
      if (index < filled) {
        segment.classList.add('bg-success');
        segment.classList.remove('bg-light');
      } else {
        segment.classList.add('bg-light');
        segment.classList.remove('bg-success');
      }
    });
  };

  statusHealthy.addEventListener('change', updateInjuryBlock);
  statusInjured.addEventListener('change', updateInjuryBlock);
  injuryType.addEventListener('change', updateInjuryOther);
  insuranceProvider.addEventListener('change', updateProviderOther);
  fatigueLevel.addEventListener('change', updateFatigue);

  updateInjuryBlock();
  updateInjuryOther();
  updateProviderOther();
  updateFatigue();
</script>

<!-- Integration notes: medical status radios should bind to player health status. -->
<!-- Integration notes: #injuryType and #injuryOther should map to injury taxonomy fields. -->
<!-- Integration notes: #insuranceProvider, #providerOther, and #policyNumber should sync with insurance records. -->
<!-- Integration notes: document table rows should be hydrated from staff uploads. -->
<!-- Integration notes: appointments list should load from the medical scheduling system. -->
